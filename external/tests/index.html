<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//HbbTV//1.1.1//EN" "http://www.hbbtv.org/dtd/HbbTV-1.1.1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Open Red Button Project - Unit Tests</title>
<meta http-equiv="content-type" content="Content-Type: application/vnd.hbbtv.xhtml+xml; charset=UTF-8" />
<link rel="stylesheet" type="text/css" href="./orbunit/style.css" />
<script type="text/javascript" src="./orbunit/orbunit.js"></script>
</head>
<body>
<script>
//<![CDATA[

// Add new test pages here

const pages = [
   {name: "Creation", url: "creation.html"},
   {name: "Finalization", url: "finalization.html"},
   {name: "Punch hole", url: "punchhole.html"},
];

// But don't use this as a reference for other tests, it's unusual as it's the index page!

let cursor = 0;

function getDescription() {
   let str = "";
   for (let i = 0; i < pages.length; i++) {
      if (cursor == i) {
         str += "[" + pages[i].name.toUpperCase() + "]\n";
      } else {
         str += pages[i].name + "\n";
      }
   }
   str += "\nPress UP and DOWN to select a test. Press OK to open the selected test.";
   return str;
}

window.onload = () => {
   orbunit.init({
      showApp: true,
      keyset: orbunit.KEYSET_NAVIGATION,
      title: "Open Red Button Project - Unit Tests",
      description: getDescription()
   });
   window.onkeydown = (e) => {
      if (e.keyCode == window.KeyEvent.VK_UP) {
         cursor = ((cursor - 1) < 0) ? pages.length - 1 : (cursor - 1);
         orbunit.banner({description: getDescription()});
      }
      if (e.keyCode == window.KeyEvent.VK_DOWN) {
         cursor = ((cursor + 1) == pages.length) ? 0 : (cursor + 1);
         orbunit.banner({description: getDescription()});
      }
      if (e.keyCode == window.KeyEvent.VK_ENTER) {
         document.location.href = pages[cursor].url;
      }
   };
}

//]]>
</script>
</body>
</html>
