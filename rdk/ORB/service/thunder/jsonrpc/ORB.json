{
  "$schema": "interface.schema.json",
  "jsonrpc": "2.0",
  "info":
  {
    "title": "ORB API",
    "class": "ORB",
    "description": "ORB JSON-RPC interface"
  },
  "common":
  {
    "$ref": "common.json"
  },
  "methods":
  {
    "ExecuteWpeBridgeRequest": {
      "summary": "Execute the specified request coming from the WPE bridge.",
      "params": {
        "description": "The JSON request",
        "type": "object"
      },
      "result": {
        "description": "The JSON response",
        "type": "object"
      }
    },
    "CreateToken": {
      "summary": "Create a new JSON token for the current application and the given uri",
      "params": {
        "description": "The given URI",
        "type": "string"
      },
      "result": {
        "summary": "The token used by the WPE bridge",
        "type": "object",
        "properties": {
          "payload": {
            "summary": "The token payload",
            "type": "object",
            "properties": {
              "appId": {
                "summary": "The application id",
                "type": "number",
                "signed": false,
                "size": 16
              },
              "uri": {
                "summary": "The application uri",
                "type": "string"
              },
              "origin": {
                "summary": "The application origin",
                "type": "string"
              }
            }
          },
          "signature": {
            "summary": "The token signature",
            "type": "string"
          }
        }
      }
    },
    "ApplicationPageChanged": {
      "summary": "Notify the application manager that the current HbbTV application's page has changed.",
      "params": {
        "description": "The URL of the current HbbTV application",
        "type": "string"
      },
      "result": {
        "$ref": "#/common/results/void"
      }
    },
    "ApplicationLoadFailed": {
      "summary": "Notify the application manager and the JavaScript context that the HbbTV application load has failed",
      "params": {
        "type": "object",
        "properties": {
          "url": {
            "summary": "The URL of the failed HbbTV application",
            "type": "string"
          },
          "errorDescription": {
            "summary": "The error description",
            "type": "string"
          }
        }
      },
      "result": {
        "$ref": "#/common/results/void"
      }
    },
    "LoadDvbUrl": {
      "summary": "Load the specified DVB URL from the DSM-CC implementation.",
      "params": {
        "type": "object",
        "properties": {
          "url": {
            "summary": "The DVB URL",
            "type": "string"
          },
          "requestId": {
            "summary": "The request identifier",
            "type": "number",
            "signed": true,
            "size": 32
          }
        }
      },
      "result": {
        "$ref": "#/common/results/void"
      }
    },
    "SendKeyEvent": {
      "summary": "Send the specified key event to the current HbbTV application (if any)",
      "params": {
        "description": "The event's JavaScript key code",
        "type": "number",
        "signed": false,
        "size": 16,
        "example": 27
      },
      "result": {
        "description": "True if the key event was consumed by the current HbbTV application, otherwise false",
        "type": "boolean",
        "example": true
      }
    }
  },
  "events":
  {
    "javaScriptEventDispatchRequested": {
      "summary": "Triggered when an internal event needs to be dispatched to the JavaScript context of the current HbbTV application",
      "params": {
        "type": "object",
        "properties": {
          "eventName": {
            "summary": "The event name",
            "type": "string"
          },
          "eventProperties": {
            "summary": "The stringified JSON object containing the event properties",
            "type": "string"
          },
          "broadcastRelated": {
            "summary": "Indicates whether the event is broadcast-related or not",
            "type": "boolean",
            "example": true
          },
          "targetOrigin": {
            "summary": "The event's target origin",
            "type": "string"
          }
        },
        "required": [
          "eventName",
          "eventProperties"
        ]
      }
    },
    "dvbUrlLoaded": {
      "summary": "Triggered upon completion of the LoadDvbUrl method",
      "params": {
        "type": "object",
        "properties": {
          "requestId": {
            "summary": "The request identifier",
            "type": "number",
            "signed": true,
            "size": 32
          },
          "fileContentLength": {
            "summary": "The DSM-CC file content length",
            "type": "number",
            "signed": false,
            "size": 32
          }
        }
      }
    },
    "inputKeyGenerated": {
      "summary": "Triggered upon generation of an input key by some third-party entity",
      "params": {
        "type": "number",
        "signed": true,
        "size": 32
      }
    }
  }
}
